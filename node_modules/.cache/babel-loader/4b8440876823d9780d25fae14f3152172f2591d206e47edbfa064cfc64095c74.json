{"ast":null,"code":"import{useState}from\"react\";import Box from\"./Box\";import Counter from\"./Counter\";import{useCallback}from\"react\";import{comma}from\"../../utils/convert\";import{Link}from\"react-router-dom\";import Button from\"./Button\";import Photo from\"./Photo\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const staticServerUri=process.env.REACT_APP_PATH||\"\";// 각 상품별 장바구니 항목\n// 여러 옵션이 저장될 수 있음\nconst CartItem=_ref=>{let{item,onChange}=_ref;const[amounts,setAmounts]=useState(item.carts.map(cart=>({id:cart.id,amount:cart.price})));const[totalAmount,setTotalAmount]=useState(item.carts.reduce((acc,cur)=>{return acc+cur.price;},0));const getOptionAmountById=useCallback(id=>{const foundElement=amounts.find(element=>element.id===id);return foundElement?foundElement.amount:0;},[amounts]);const setOptionAmountById=useCallback((id,addNum)=>{setAmounts(prev=>{return prev.map(element=>{if(element.id===id){return{...element,amount:element.amount+addNum};}return element;});});setTotalAmount(prev=>prev+addNum);},[]);return/*#__PURE__*/_jsxs(Box,{className:\"border rounded bg-white px-10 py-6 my-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center  mb-3\",children:[/*#__PURE__*/_jsx(Photo,{className:\"w-20 h-20 rounded border border-neutral-200\",src:`${process.env.REACT_APP_API_URL}/images/${item.id}.jpg`// 아래는 크램폴린 배포 환경에서 이용한 src\n// 크램폴린 배포 서버에서 api로 이미지를 제공해 주지않아 public 이미지를 이용하도록 수정\n// src={`/images/${item.id}.jpg`}\n,alt:`${item.productName} image`}),/*#__PURE__*/_jsx(Link,{to:staticServerUri+`/product/${item.id}`,children:/*#__PURE__*/_jsx(\"h5\",{className:\"pl-3 font-semibold text-base tracking-tighter\",children:item.productName})})]}),item.carts.map(cart=>{return(// 개수가 0개인 옵션은 표시하지 않도록 한다.\ncart.quantity!==0&&/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded bg-[#FDFDFD] p-6 my-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"span\",{children:cart.option.optionName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Button,{className:\"w-fit h-8 mr-3 bg-white border rounded border-neutral-200 \",onClick:()=>{onChange(cart.id,0,-cart.quantity*cart.option.price);setOptionAmountById(cart.id,-cart.quantity*cart.option.price);},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm px-3\",children:\"\\uC0AD\\uC81C\"})}),/*#__PURE__*/_jsx(Counter,{value:cart.quantity,onIncrease:count=>{// onChange(아이디, 변경된 수량, 해당 옵션 상품의 가격)\nonChange(cart.id,count,cart.option.price);setOptionAmountById(cart.id,cart.option.price);},onDecrease:count=>{onChange(cart.id,count,-cart.option.price);setOptionAmountById(cart.id,-cart.option.price);}}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto\",children:[comma(getOptionAmountById(cart.id)),\"\\uC6D0\"]})]})]},cart.id));}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded bg-[#FAFAFA] px-6 py-4 mt-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\uC8FC\\uBB38\\uAE08\\uC561\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"float-right font-semibold\",children:[comma(totalAmount),\"\\uC6D0\"]})]})]});};export default CartItem;","map":{"version":3,"names":["useState","Box","Counter","useCallback","comma","Link","Button","Photo","jsx","_jsx","jsxs","_jsxs","staticServerUri","process","env","REACT_APP_PATH","CartItem","_ref","item","onChange","amounts","setAmounts","carts","map","cart","id","amount","price","totalAmount","setTotalAmount","reduce","acc","cur","getOptionAmountById","foundElement","find","element","setOptionAmountById","addNum","prev","className","children","src","REACT_APP_API_URL","alt","productName","to","quantity","option","optionName","onClick","value","onIncrease","count","onDecrease"],"sources":["/Users/master/Desktop/coupon-project/kakaoshop-FE/src/components/atoms/CartItem.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport Box from \"./Box\";\nimport Counter from \"./Counter\";\nimport { useCallback } from \"react\";\nimport { comma } from \"../../utils/convert\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"./Button\";\nimport Photo from \"./Photo\";\n\nconst staticServerUri = process.env.REACT_APP_PATH || \"\";\n\n// 각 상품별 장바구니 항목\n// 여러 옵션이 저장될 수 있음\nconst CartItem = ({ item, onChange }) => {\n  const [amounts, setAmounts] = useState(\n    item.carts.map((cart) => ({\n      id: cart.id,\n      amount: cart.price,\n    }))\n  );\n  const [totalAmount, setTotalAmount] = useState(\n    item.carts.reduce((acc, cur) => {\n      return acc + cur.price;\n    }, 0)\n  );\n  const getOptionAmountById = useCallback(\n    (id) => {\n      const foundElement = amounts.find((element) => element.id === id);\n      return foundElement ? foundElement.amount : 0;\n    },\n    [amounts]\n  );\n  const setOptionAmountById = useCallback((id, addNum) => {\n    setAmounts((prev) => {\n      return prev.map((element) => {\n        if (element.id === id) {\n          return { ...element, amount: element.amount + addNum };\n        }\n        return element;\n      });\n    });\n    setTotalAmount((prev) => prev + addNum);\n  }, []);\n\n  return (\n    <Box className=\"border rounded bg-white px-10 py-6 my-2\">\n      <div className=\"flex items-center  mb-3\">\n        <Photo\n          className=\"w-20 h-20 rounded border border-neutral-200\"\n          src={`${process.env.REACT_APP_API_URL}/images/${item.id}.jpg`}\n          // 아래는 크램폴린 배포 환경에서 이용한 src\n          // 크램폴린 배포 서버에서 api로 이미지를 제공해 주지않아 public 이미지를 이용하도록 수정\n          // src={`/images/${item.id}.jpg`}\n          alt={`${item.productName} image`}\n        />\n        <Link to={staticServerUri + `/product/${item.id}`}>\n          <h5 className=\"pl-3 font-semibold text-base tracking-tighter\">\n            {item.productName}\n          </h5>\n        </Link>\n      </div>\n\n      {item.carts.map((cart) => {\n        return (\n          // 개수가 0개인 옵션은 표시하지 않도록 한다.\n          cart.quantity !== 0 && (\n            <div\n              //옵션 아이디\n              key={cart.id}\n              className=\"border rounded bg-[#FDFDFD] p-6 my-2\"\n            >\n              <div className=\"mb-4\">\n                <span>{cart.option.optionName}</span>\n              </div>\n              <div className=\"flex items-center\">\n                {/* 삭제 버튼 구현 */}\n                <Button\n                  className=\"w-fit h-8 mr-3 bg-white border rounded border-neutral-200 \"\n                  onClick={() => {\n                    onChange(cart.id, 0, -cart.quantity * cart.option.price);\n                    setOptionAmountById(\n                      cart.id,\n                      -cart.quantity * cart.option.price\n                    );\n                  }}\n                >\n                  <span className=\"text-sm px-3\">삭제</span>\n                </Button>\n                <Counter\n                  value={cart.quantity}\n                  onIncrease={(count) => {\n                    // onChange(아이디, 변경된 수량, 해당 옵션 상품의 가격)\n                    onChange(cart.id, count, cart.option.price);\n                    setOptionAmountById(cart.id, cart.option.price);\n                  }}\n                  onDecrease={(count) => {\n                    onChange(cart.id, count, -cart.option.price);\n                    setOptionAmountById(cart.id, -cart.option.price);\n                  }}\n                />\n                <span className=\"ml-auto\">\n                  {comma(getOptionAmountById(cart.id))}원\n                </span>\n              </div>\n            </div>\n          )\n        );\n      })}\n      <div className=\"border rounded bg-[#FAFAFA] px-6 py-4 mt-6\">\n        <span className=\"font-semibold\">주문금액</span>\n        <span className=\"float-right font-semibold\">\n          {comma(totalAmount)}원\n        </span>\n      </div>\n    </Box>\n  );\n};\nexport default CartItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}